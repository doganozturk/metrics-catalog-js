"use strict";class t{constructor(t){this.options=t,this.url="http://httpbin.org/anything"}init(){window.addEventListener("load",()=>{setTimeout(()=>{const t=this.collectMetrics();this.postMetrics(t)},500)})}static getNavigationRelatedMetrics(){const t=window.performance.getEntriesByType("navigation")[0];return{ttfb:t.responseStart-t.requestStart,domContentLoaded:t.domContentLoadedEventEnd,windowLoaded:t.loadEventEnd}}static getPaintRelatedMetrics(){return{resources:window.performance.getEntriesByType("resource").map(t=>({name:t.name,requestStart:t.requestStart,responseEnd:t.responseEnd,startTime:t.startTime}))}}static getResourceRelatedMetrics(){return{fcp:window.performance.getEntriesByType("paint").filter(t=>"first-contentful-paint"===t.name)[0].startTime}}collectMetrics(){return Object.assign(Object.assign(Object.assign({host:this.options.host,date:new Date},t.getPaintRelatedMetrics()),t.getResourceRelatedMetrics()),t.getNavigationRelatedMetrics())}postMetrics(t){return fetch(this.url,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(t=>t.json()).then(console.log).catch(t=>console.error(t))}}module.exports=t;
